(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a5b66df"],{"7f96":function(e,t,c){"use strict";var o=c("7a23"),l={class:"modal fade",id:"checkModal",tabindex:"-1","aria-hidden":"true"},a={class:"modal-dialog"},n={class:"modal-content"},d=Object(o["createElementVNode"])("div",{class:"modal-header"},[Object(o["createElementVNode"])("h5",{class:"modal-title"},"貼心提示"),Object(o["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),r=Object(o["createElementVNode"])("div",{class:"modal-body"},[Object(o["createElementVNode"])("p",null,"為什麼要登出？確定要登出嗎？")],-1),i={class:"modal-footer"},s=Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"再想一下",-1);function u(e,t,c,u,b,m){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("div",n,[d,r,Object(o["createElementVNode"])("div",i,[s,Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=function(){return m.logout&&m.logout.apply(m,arguments)}),"data-bs-dismiss":"modal"},"對，我就是要登出")])])])])}var b={name:"CheckModal",methods:{logout:function(){this.$emit("logout")}}},m=c("6b0d"),p=c.n(m);const O=p()(b,[["render",u]]);t["a"]=O},b0c0:function(e,t,c){var o=c("83ab"),l=c("5e77").EXISTS,a=c("e330"),n=c("9bf2").f,d=Function.prototype,r=a(d.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=a(i.exec),u="name";o&&!l&&n(d,u,{configurable:!0,get:function(){try{return s(i,r(this))[1]}catch(e){return""}}})},b9ab:function(e,t,c){"use strict";c.r(t);c("b0c0");var o=c("7a23"),l={class:"container"},a={class:"row justify-content-lg-center"},n={class:"col-lg-12"},d={class:"table mt-4"},r=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",{width:"120"},"購買時間"),Object(o["createElementVNode"])("th",{width:"120"},"購買人 / Email"),Object(o["createElementVNode"])("th",{width:"120"},"訂單編號"),Object(o["createElementVNode"])("th",null,"訂單明細"),Object(o["createElementVNode"])("th",{width:"100"},"訂單金額"),Object(o["createElementVNode"])("th",{width:"100"},"總金額"),Object(o["createElementVNode"])("th",{width:"100"},"是否付款"),Object(o["createElementVNode"])("th",{width:"120"},"編輯")])],-1),i=["onClick"],s={key:0,class:"text-success"},u=Object(o["createElementVNode"])("i",{class:"bi bi-check-circle-fill me-1"},null,-1),b=Object(o["createTextVNode"])("已付款"),m=[u,b],p={key:1,class:"text-danger"},O=Object(o["createElementVNode"])("i",{class:"bi bi-x-circle-fill me-1"},null,-1),j=Object(o["createTextVNode"])("未付款"),h=[O,j],f={class:"btn-group"},V=["onClick"],E=["onClick"],N={class:"row"},v={class:"col-12"};function g(e,t,c,u,b,O){var j=Object(o["resolveComponent"])("PaginationView"),g=Object(o["resolveComponent"])("CheckModal"),y=Object(o["resolveComponent"])("OrderModal"),k=Object(o["resolveComponent"])("DeleteOrderModal");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("table",d,[r,Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(b.orders,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:t.id},[Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.user.name)+" ",1),Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(t.user.email),1)]),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.id),1),Object(o["createElementVNode"])("td",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t.products,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",{class:"list-unstyled",key:e.id},[Object(o["createElementVNode"])("li",null,Object(o["toDisplayString"])(e.product.title),1)])})),128))]),Object(o["createElementVNode"])("td",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t.products,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",{class:"list-unstyled",key:e.id},[Object(o["createElementVNode"])("li",null,Object(o["toDisplayString"])(e.total),1)])})),128))]),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.total),1),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("a",{class:"text-decoration-none",href:"#",onClick:Object(o["withModifiers"])((function(e){return O.switchPaid(t.id)}),["prevent"])},[t.is_paid?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",s,m)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",p,h))],8,i)]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary btn-sm me-2",onClick:function(e){return O.openEditModal("edit",t)}}," 編輯 ",8,V),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return O.openEditModal("delete",t)}}," 刪除 ",8,E)])])])})),128))])])])]),Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("div",v,[Object(o["createVNode"])(j,{pages:b.pagination,onGetProduct:O.getData},null,8,["pages","onGetProduct"])])])]),Object(o["createVNode"])(g),Object(o["createVNode"])(y,{ref:"orderModal",onGetData:O.getData,product:b.tempProduct},null,8,["onGetData","product"]),Object(o["createVNode"])(k,{ref:"deleteModal",onGetData:O.getData,product:b.tempProduct},null,8,["onGetData","product"])],64)}c("99af"),c("e9c4");var y=c("7f96"),k=c("ca8d"),M={class:"modal fade",id:"productModal",ref:"modal"},w={class:"modal-dialog modal-xl",role:"document"},P={class:"modal-content"},x={class:"modal-header"},B=Object(o["createElementVNode"])("h5",{class:"modal-title"},"編輯訂單",-1),D={class:"modal-body"},C={class:"row"},S={class:"col-lg-12"},T={class:"mb-3"},$=Object(o["createElementVNode"])("label",{for:"orderId",class:"form-label"},"產品編號",-1),_=["disabled"],U={class:"col-12 mb-1"},J={class:"mb-3 col-lg-4"},F=Object(o["createElementVNode"])("label",{for:"product-title",class:"form-label"},"產品名稱",-1),G=["onUpdate:modelValue"],L={class:"mb-3 col-lg-4"},q=Object(o["createElementVNode"])("label",{for:"final_total",class:"form-label"},"產品售價",-1),I=["onUpdate:modelValue"],X={class:"mb-3 col-lg-4"},z=Object(o["createElementVNode"])("label",{for:"product-qty",class:"form-label"},"產品數量",-1),A=["onUpdate:modelValue"],H={class:"row mt-3"},K={class:"col-lg-4"},Q={class:"mb-3"},R=Object(o["createElementVNode"])("label",{for:"orderTotal",class:"form-label"},"訂單總金額",-1),W={class:"col-lg-4"},Y={class:"mb-3"},Z=Object(o["createElementVNode"])("label",{for:"orderTel",class:"form-label"},"訂購人電話",-1),ee={class:"col-lg-4"},te={class:"mb-3"},ce=Object(o["createElementVNode"])("label",{for:"orderMail",class:"form-label"},"訂購人郵件",-1),oe={class:"col-lg-12"},le={class:"mb-3"},ae={class:"form-check"},ne=Object(o["createElementVNode"])("label",{class:"form-check-label",for:"is_paid"},"是否付款",-1),de={class:"modal-footer"};function re(e,t,c,l,a,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",M,[Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("div",P,[Object(o["createElementVNode"])("div",x,[B,Object(o["createElementVNode"])("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=function(){return n.hideModal&&n.hideModal.apply(n,arguments)})})]),Object(o["createElementVNode"])("div",D,[Object(o["createElementVNode"])("div",C,[Object(o["createElementVNode"])("div",S,[Object(o["createElementVNode"])("div",T,[$,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"orderId",type:"text",class:"form-control",placeholder:"請輸入產品編號",disabled:"".concat(a.tempProduct.id),"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.tempProduct.id=e})},null,8,_),[[o["vModelText"],a.tempProduct.id]])])])]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.tempProduct.products,(function(e,t,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"row bg-light py-3",key:e.id},[Object(o["createElementVNode"])("div",U,[Object(o["createElementVNode"])("h5",null,"第 "+Object(o["toDisplayString"])(c+1)+" 筆訂單資訊",1)]),Object(o["createElementVNode"])("div",J,[F,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"product-title",type:"text",class:"form-control",placeholder:"請輸入產品名稱","onUpdate:modelValue":function(t){return e.product.title=t}},null,8,G),[[o["vModelText"],e.product.title]])]),Object(o["createElementVNode"])("div",L,[q,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"final_total",type:"number",class:"form-control",placeholder:"請輸入產品售價","onUpdate:modelValue":function(t){return e.final_total=t}},null,8,I),[[o["vModelText"],e.final_total]])]),Object(o["createElementVNode"])("div",X,[z,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"product-qty",type:"number",min:"0",class:"form-control",placeholder:"請輸入產品數量","onUpdate:modelValue":function(t){return e.qty=t}},null,8,A),[[o["vModelText"],e.qty,void 0,{number:!0}]])])])})),128)),Object(o["createElementVNode"])("div",H,[Object(o["createElementVNode"])("div",K,[Object(o["createElementVNode"])("div",Q,[R,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"orderTotal",type:"number",class:"form-control",placeholder:"請輸入訂單金額","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.tempProduct.total=e})},null,512),[[o["vModelText"],a.tempProduct.total]])])]),Object(o["createElementVNode"])("div",W,[Object(o["createElementVNode"])("div",Y,[Z,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"orderTel",type:"tel",class:"form-control",placeholder:"請輸入訂購人電話","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.tempProduct.user.tel=e})},null,512),[[o["vModelText"],a.tempProduct.user.tel]])])]),Object(o["createElementVNode"])("div",ee,[Object(o["createElementVNode"])("div",te,[ce,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"orderMail",type:"email",class:"form-control",placeholder:"請輸入訂購人郵件","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.tempProduct.user.email=e})},null,512),[[o["vModelText"],a.tempProduct.user.email]])])]),Object(o["createElementVNode"])("div",oe,[Object(o["createElementVNode"])("div",le,[Object(o["createElementVNode"])("div",ae,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"is_paid",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.tempProduct.is_paid=e})},null,512),[[o["vModelCheckbox"],a.tempProduct.is_paid]]),ne])])])])]),Object(o["createElementVNode"])("div",de,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[6]||(t[6]=function(){return n.closeModal&&n.closeModal.apply(n,arguments)})}," 取消 "),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[7]||(t[7]=function(){return n.editModal&&n.editModal.apply(n,arguments)})}," 確認 ")])])])],512)}var ie=c("7c2b"),se=c.n(ie),ue={data:function(){return{modal:"",tempProduct:{product:{},user:{}}}},props:{product:{type:Object}},watch:{product:function(){this.tempProduct=JSON.parse(JSON.stringify(this.product)),this.isNew=this.stateNew,console.log("watch--tempProduct",this.tempProduct)}},mounted:function(){this.modal=new se.a(this.$refs.modal,{keyboard:!1,backdrop:"static"})},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()},editModal:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("yuritatest","/admin/order/").concat(this.tempProduct.id),c="put";this.$http[c](t,{data:this.tempProduct}).then((function(t){e.$emit("get-data"),e.hideModal(),alert(t.data.message)})).catch((function(t){alert(t.response.data.message),e.hideModal()}))},closeModal:function(){this.hideModal()}}},be=c("6b0d"),me=c.n(be);const pe=me()(ue,[["render",re]]);var Oe=pe,je={class:"modal fade",ref:"modal"},he={class:"modal-dialog"},fe={class:"modal-content border-0"},Ve={class:"modal-header bg-danger text-white"},Ee=Object(o["createElementVNode"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(o["createElementVNode"])("span",null,"刪除訂單")],-1),Ne=Object(o["createElementVNode"])("div",{class:"modal-body"},[Object(o["createTextVNode"])(" 是否刪除 "),Object(o["createElementVNode"])("strong",{class:"text-danger"}),Object(o["createTextVNode"])(" 訂單(刪除後將無法恢復)。 ")],-1),ve={class:"modal-footer"};function ge(e,t,c,l,a,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",je,[Object(o["createElementVNode"])("div",he,[Object(o["createElementVNode"])("div",fe,[Object(o["createElementVNode"])("div",Ve,[Ee,Object(o["createElementVNode"])("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=function(){return n.hideModal&&n.hideModal.apply(n,arguments)})})]),Ne,Object(o["createElementVNode"])("div",ve,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[1]||(t[1]=function(){return n.hideModal&&n.hideModal.apply(n,arguments)})}," 取消 "),Object(o["createElementVNode"])("button",{type:"button",onClick:t[2]||(t[2]=function(){return n.deleteProduct&&n.deleteProduct.apply(n,arguments)}),class:"btn btn-danger"}," 確認刪除 ")])])])],512)}var ye={data:function(){return{modal:"",tempProduct:{product:{},user:{}}}},props:{product:{type:Object}},watch:{product:function(){this.tempProduct=JSON.parse(JSON.stringify(this.product))}},mounted:function(){this.modal=new se.a(this.$refs.modal,{keyboard:!1,backdrop:"static"})},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()},deleteProduct:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("yuritatest","/admin/order/").concat(this.tempProduct.id);this.$http.delete(t).then((function(t){e.$emit("get-data"),e.hideModal(),alert(t.data.message)})).catch((function(e){alert(e.response.data.message)}))}}};const ke=me()(ye,[["render",ge]]);var Me=ke,we={data:function(){return{orders:[],tempProduct:{},pagination:{}}},components:{CheckModal:y["a"],PaginationView:k["a"],OrderModal:Oe,DeleteOrderModal:Me},mounted:function(){this.getData()},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("yuritatest","/admin/orders/?page=").concat(t)).then((function(t){t.data.success&&(e.orders=t.data.orders,e.pagination=t.data.pagination)})).catch((function(e){alert(e.response.data.message)}))},openEditModal:function(e,t){switch(e){case"edit":this.tempProduct=JSON.parse(JSON.stringify(t)),this.$refs.orderModal.openModal();break;case"add":this.tempProduct={},this.$refs.orderModal.openModal();break;case"delete":this.tempProduct=JSON.parse(JSON.stringify(t)),this.$refs.deleteModal.openModal();break}},switchPaid:function(e){var t=this;this.tempProduct.is_paid=!this.tempProduct.is_paid;var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("yuritatest","/admin/order/").concat(e);console.log(c);var o="put";this.$http[o](c,{data:this.tempProduct}).then((function(e){alert(e.data.message),t.getData()})).catch((function(e){alert(e.response.data.message)}))}}};const Pe=me()(we,[["render",g]]);t["default"]=Pe}}]);
//# sourceMappingURL=chunk-3a5b66df.4565691b.js.map