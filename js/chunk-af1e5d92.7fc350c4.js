(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af1e5d92"],{"0b42":function(t,e,n){var c=n("da84"),a=n("e8b5"),o=n("68ee"),r=n("861d"),i=n("b622"),l=i("species"),s=c.Array;t.exports=function(t){var e;return a(t)&&(e=t.constructor,o(e)&&(e===s||a(e.prototype))?e=void 0:r(e)&&(e=e[l],null===e&&(e=void 0))),void 0===e?s:e}},"1dde":function(t,e,n){var c=n("d039"),a=n("b622"),o=n("2d00"),r=a("species");t.exports=function(t){return o>=51||!c((function(){var e=[],n=e.constructor={};return n[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,n){var c=n("0b42");t.exports=function(t,e){return new(c(t))(0===e?0:e)}},"6be2":function(t,e,n){"use strict";var c=function(t){return{all:t=t||new Map,on:function(e,n){var c=t.get(e);c?c.push(n):t.set(e,[n])},off:function(e,n){var c=t.get(e);c&&(n?c.splice(c.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var c=t.get(e);c&&c.slice().map((function(t){t(n)})),(c=t.get("*"))&&c.slice().map((function(t){t(e,n)}))}}},a=c();e["a"]=a},8418:function(t,e,n){"use strict";var c=n("a04b"),a=n("9bf2"),o=n("5c6c");t.exports=function(t,e,n){var r=c(e);r in t?a.f(t,r,o(0,n)):t[r]=n}},"99af":function(t,e,n){"use strict";var c=n("23e7"),a=n("da84"),o=n("d039"),r=n("e8b5"),i=n("861d"),l=n("7b0b"),s=n("07fa"),d=n("8418"),u=n("65f0"),b=n("1dde"),p=n("b622"),f=n("2d00"),m=p("isConcatSpreadable"),g=9007199254740991,h="Maximum allowed index exceeded",O=a.TypeError,v=f>=51||!o((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),j=b("concat"),V=function(t){if(!i(t))return!1;var e=t[m];return void 0!==e?!!e:r(t)},E=!v||!j;c({target:"Array",proto:!0,forced:E},{concat:function(t){var e,n,c,a,o,r=l(this),i=u(r,0),b=0;for(e=-1,c=arguments.length;e<c;e++)if(o=-1===e?r:arguments[e],V(o)){if(a=s(o),b+a>g)throw O(h);for(n=0;n<a;n++,b++)n in o&&d(i,b,o[n])}else{if(b>=g)throw O(h);d(i,b++,o)}return i.length=b,i}})},cc55:function(t,e,n){"use strict";n.r(e);var c=n("7a23"),a={class:"container mt-3"},o={class:"text-end"},r=["disabled"],i={class:"table align-middle"},l=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th"),Object(c["createElementVNode"])("th",null,"品名"),Object(c["createElementVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(c["createElementVNode"])("th",{class:"text-end"},"單價")])],-1),s=["onClick"],d={class:"fas fa-spinner fa-pulse"},u=Object(c["createTextVNode"])(" x "),b=Object(c["createElementVNode"])("div",{class:"text-success"},"已套用優惠券",-1),p={class:"input-group input-group-sm"},f={class:"input-group mb-3"},m=["onUpdate:modelValue","onChange","disabled"],g=["value"],h={class:"input-group-text",id:"basic-addon2"},O={class:"text-end"},v={class:"ms-3 text-success"},j=Object(c["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),V={class:"text-end"},E={class:"text-end"},N=["disabled"];function y(t,e,n,y,x,C){var k=Object(c["resolveComponent"])("Loading");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(k,{active:x.isLoading,"onUpdate:active":e[0]||(e[0]=function(t){return x.isLoading=t}),"can-cancel":!0,"on-cancel":t.onCancel,"is-full-page":t.fullPage},null,8,["active","on-cancel","is-full-page"]),Object(c["createElementVNode"])("div",a,[Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-dark",type:"button",onClick:e[1]||(e[1]=function(){return C.removeAllCarts&&C.removeAllCarts.apply(C,arguments)}),disabled:0===x.cartData.total}," 清空購物車 ",8,r)]),Object(c["createElementVNode"])("table",i,[l,Object(c["createElementVNode"])("tbody",null,[x.cartData.carts?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(x.cartData.carts,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("button",{type:"button",onClick:function(t){return C.removeCartItem(e.id)},class:"btn btn-outline-danger btn-sm"},[Object(c["withDirectives"])(Object(c["createElementVNode"])("i",d,null,512),[[c["vShow"],e.id===t.isDeleteLoadingItem]]),u],8,s)]),Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.product.title)+" ",1),b]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("div",f,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{name:"cartNum",id:"cart",class:"form-selest","onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return C.updateCart(e)},disabled:t.isCartLoadingItem===e.id},[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(20,(function(t){return Object(c["createElementVNode"])("option",{value:t,key:t+"cart"},Object(c["toDisplayString"])(t),9,g)})),64))],40,m),[[c["vModelSelect"],e.qty]]),Object(c["createElementVNode"])("span",h,Object(c["toDisplayString"])(e.product.unit),1)])])]),Object(c["createElementVNode"])("td",O,[Object(c["createElementVNode"])("small",null,Object(c["toDisplayString"])(e.product.origin_price),1),Object(c["createElementVNode"])("span",v,"折扣價： "+Object(c["toDisplayString"])(e.product.price),1)])])})),128)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("tfoot",null,[Object(c["createElementVNode"])("tr",null,[j,Object(c["createElementVNode"])("td",V,Object(c["toDisplayString"])(x.cartData.total),1)])])]),Object(c["createElementVNode"])("div",E,[Object(c["createElementVNode"])("button",{class:"btn btn-danger",type:"button",onClick:e[2]||(e[2]=function(){return C.goOrderPage&&C.goOrderPage.apply(C,arguments)}),disabled:0===x.cartData.total}," 確認訂單，結帳 ",8,N)])])],64)}n("99af");var x=n("6be2"),C=n("9062"),k=n.n(C),D=(n("e40d"),{data:function(){return{cartData:{},isLoading:!1}},components:{Loading:k.a},methods:{getCarts:function(){var t=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("yuritatest","/cart")).then((function(e){t.cartData=e.data.data,x["a"].emit("get-cart"),t.isLoading=!1})).catch((function(e){t.isLoading=!1,alert(e)}))},updateCart:function(t){var e=this;this.isCartLoadingItem=t.id,this.$http.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("yuritatest","/cart/").concat(t.id),{data:{product_id:t.id,qty:t.qty}}).then((function(t){e.getCarts(),e.isCartLoadingItem=""})).catch((function(t){alert(t.data)}))},removeCartItem:function(t){var e=this;this.isDeleteLoadingItem=t,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("yuritatest","/cart/").concat(t)).then((function(t){e.getCarts(),e.isDeleteLoadingItem=""})).catch((function(t){alert(t.data.message)}))},removeAllCarts:function(){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("yuritatest","/carts")).then((function(e){t.getCarts()})).catch((function(t){alert(t.data.message)}))},goOrderPage:function(){this.$router.push("/order")}},created:function(){this.getCarts()}}),L=n("6b0d"),w=n.n(L);const B=w()(D,[["render",y]]);e["default"]=B},e8b5:function(t,e,n){var c=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==c(t)}}}]);
//# sourceMappingURL=chunk-af1e5d92.7fc350c4.js.map